<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 개발 시스템 - 고급 기능</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }

        .feature-card h3 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-card .icon {
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type=file] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: block;
            padding: 20px;
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.5);
        }

        .file-upload-label:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .btn-success {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }

        .select-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .results {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            display: none;
        }

        .results.show {
            display: block;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .result-header h3 {
            color: #4a5568;
            font-size: 1.5em;
        }

        .score-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            color: white;
        }

        .score-excellent {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .score-good {
            background: linear-gradient(135deg, #4299e1, #3182ce);
        }

        .score-fair {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }

        .score-poor {
            background: linear-gradient(135deg, #f56565, #e53e3e);
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
            position: relative;
        }

        .code-block .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .tab {
            background: none;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 16px;
            color: #718096;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .issue-list {
            margin: 20px 0;
        }

        .issue-item {
            background: rgba(0, 0, 0, 0.02);
            border-left: 4px solid #cbd5e0;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
        }

        .issue-item.high {
            border-left-color: #f56565;
            background: rgba(245, 101, 101, 0.05);
        }

        .issue-item.medium {
            border-left-color: #ed8936;
            background: rgba(237, 137, 54, 0.05);
        }

        .issue-item.low {
            border-left-color: #4299e1;
            background: rgba(66, 153, 225, 0.05);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.02);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #718096;
            font-size: 14px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #e2e8f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .notification.error {
            background: linear-gradient(135deg, #f56565, #e53e3e);
        }

        .notification.info {
            background: linear-gradient(135deg, #4299e1, #3182ce);
        }

        /* AI 설정 관련 스타일 */
        .status-indicator {
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 10px;
        }

        .status-indicator.enabled {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }

        .status-indicator.disabled {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #fc8181;
        }

        .provider-status {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .provider-item {
            flex: 1;
            min-width: 120px;
        }

        .provider-badge {
            display: block;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
        }

        .provider-badge.available {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }

        .provider-badge.unavailable {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #fc8181;
        }

        .provider-badge.active {
            background: #667eea;
            color: white;
            border: 1px solid #5a67d8;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .button-group .btn {
            flex: 1;
            min-width: 120px;
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .result-area {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .result-area h4 {
            margin-bottom: 10px;
            color: #4a5568;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>🚀 AI 개발 시스템</h1>
                <p>고급 코드 분석 및 테스트 자동화</p>
            </div>
            <a href="/" style="background: rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 10px; text-decoration: none; color: white; transition: all 0.3s; display: flex; align-items: center; gap: 8px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                <i class="fas fa-home"></i>
                <span>메인으로</span>
            </a>
        </div>

        <div class="feature-grid">
            <!-- AI 설정 및 제공자 관리 -->
            <div class="feature-card">
                <h3><span class="icon">🤖</span>AI 설정 관리</h3>
                
                <div class="form-group">
                    <label>현재 AI 제공자:</label>
                    <div id="currentProvider" class="status-indicator">
                        로딩 중...
                    </div>
                </div>

                <div class="form-group">
                    <label>AI 제공자 선택:</label>
                    <div class="select-group">
                        <select id="aiProvider" class="form-control">
                            <option value="openai">OpenAI GPT</option>
                            <option value="gemini">Google Gemini</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>사용 가능한 제공자:</label>
                    <div id="availableProviders" class="provider-status">
                        <div class="provider-item">
                            <span id="openaiStatus" class="provider-badge">OpenAI</span>
                        </div>
                        <div class="provider-item">
                            <span id="geminiStatus" class="provider-badge">Gemini</span>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button onclick="changeAIProvider()" class="btn">
                        🔄 제공자 변경
                    </button>
                    <button onclick="testAIProvider()" class="btn btn-secondary">
                        🧪 연결 테스트
                    </button>
                    <button onclick="refreshAIStatus()" class="btn btn-secondary">
                        📊 상태 새로고침
                    </button>
                </div>

                <div id="aiStatusResult" class="result-area" style="display: none;">
                    <h4>AI 상태 정보</h4>
                    <div id="aiStatusContent"></div>
                </div>
            </div>

            <!-- 코드 리뷰 기능 -->
            <div class="feature-card">
                <h3><span class="icon">🔍</span>AI 코드 리뷰</h3>
                <div class="form-group">
                    <label>리뷰 방식 선택:</label>
                    <div class="select-group">
                        <select id="reviewType" class="form-control">
                            <option value="text">텍스트 입력</option>
                            <option value="file">파일 업로드</option>
                            <option value="project">프로젝트 전체</option>
                        </select>
                    </div>
                </div>

                <div id="reviewTextInput" class="form-group">
                    <label>코드 입력:</label>
                    <textarea id="reviewCode" class="form-control" placeholder="리뷰할 코드를 입력하세요..."></textarea>
                </div>

                <div id="reviewFileInput" class="form-group" style="display: none;">
                    <label>코드 파일 업로드:</label>
                    <div class="file-upload">
                        <input type="file" id="reviewFile" accept=".js,.ts,.jsx,.tsx,.py,.java,.cpp,.c,.cs">
                        <label for="reviewFile" class="file-upload-label">
                            📁 파일을 선택하거나 드래그 앤 드롭하세요
                        </label>
                    </div>
                </div>

                <div id="reviewProjectInput" class="form-group" style="display: none;">
                    <label>프로젝트 경로:</label>
                    <input type="text" id="reviewProjectPath" class="form-control" placeholder="/path/to/your/project">
                </div>

                <div class="form-group">
                    <label>리뷰 옵션:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="saveReviewResult" checked>
                            <label for="saveReviewResult">결과 저장</label>
                        </div>
                    </div>
                </div>

                <button onclick="startCodeReview()" class="btn">
                    🔍 코드 리뷰 시작
                </button>
            </div>

            <!-- 테스트 생성 기능 -->
            <div class="feature-card">
                <h3><span class="icon">🧪</span>지능형 테스트 생성</h3>
                <div class="form-group">
                    <label>테스트 생성 방식:</label>
                    <div class="select-group">
                        <select id="testGenType" class="form-control">
                            <option value="file">파일 업로드</option>
                            <option value="project">프로젝트 전체</option>
                            <option value="analyze">코드 분석만</option>
                            <option value="custom">커스텀 요구사항</option>
                        </select>
                    </div>
                </div>

                <div id="testFileInput" class="form-group">
                    <label>소스 파일 업로드:</label>
                    <div class="file-upload">
                        <input type="file" id="testSourceFile" accept=".js,.ts,.jsx,.tsx,.py">
                        <label for="testSourceFile" class="file-upload-label">
                            📄 테스트할 소스 파일을 선택하세요
                        </label>
                    </div>
                </div>

                <div id="testProjectInput" class="form-group" style="display: none;">
                    <label>프로젝트 경로:</label>
                    <input type="text" id="testProjectPath" class="form-control" placeholder="/path/to/your/project">
                </div>

                <div id="testCustomInput" class="form-group" style="display: none;">
                    <label>코드 입력:</label>
                    <textarea id="testCustomCode" class="form-control" placeholder="테스트를 생성할 코드를 입력하세요..."></textarea>
                    <label>커스텀 요구사항:</label>
                    <textarea id="testRequirements" class="form-control" placeholder="특별한 테스트 요구사항을 입력하세요..."></textarea>
                </div>

                <div class="form-group">
                    <label>테스트 설정:</label>
                    <div class="select-group">
                        <select id="testFramework" class="form-control">
                            <option value="jest">Jest</option>
                            <option value="mocha">Mocha</option>
                            <option value="pytest">pytest</option>
                            <option value="unittest">unittest</option>
                        </select>
                        <select id="testLanguage" class="form-control">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>테스트 유형:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="unitTests" checked>
                            <label for="unitTests">단위 테스트</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="integrationTests">
                            <label for="integrationTests">통합 테스트</label>
                        </div>
                    </div>
                </div>

                <button onclick="startTestGeneration()" class="btn">
                    🧪 테스트 생성
                </button>
            </div>

            <!-- 프로젝트 분석 -->
            <div class="feature-card">
                <h3><span class="icon">📊</span>프로젝트 분석</h3>
                <div class="form-group">
                    <label>분석 유형:</label>
                    <select id="analysisType" class="form-control">
                        <option value="code-quality">코드 품질</option>
                        <option value="security">보안 취약점</option>
                        <option value="performance">성능 분석</option>
                        <option value="dependency">의존성 분석</option>
                        <option value="comprehensive">종합 분석</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>프로젝트 경로:</label>
                    <input type="text" id="analysisProjectPath" class="form-control" placeholder="/path/to/your/project">
                </div>

                <div class="form-group">
                    <label>분석 옵션:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="includeTests" checked>
                            <label for="includeTests">테스트 파일 포함</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="deepAnalysis">
                            <label for="deepAnalysis">심화 분석</label>
                        </div>
                    </div>
                </div>

                <button onclick="startProjectAnalysis()" class="btn">
                    📊 프로젝트 분석
                </button>
            </div>

            <!-- 히스토리 및 통계 -->
            <div class="feature-card">
                <h3><span class="icon">📈</span>히스토리 및 통계</h3>
                <div class="form-group">
                    <button onclick="loadCodeReviewHistory()" class="btn btn-secondary">
                        📋 코드 리뷰 히스토리
                    </button>
                </div>

                <div class="form-group">
                    <button onclick="loadReviewStats()" class="btn btn-secondary">
                        📊 리뷰 통계
                    </button>
                </div>

                <div class="form-group">
                    <button onclick="loadTestFrameworks()" class="btn btn-secondary">
                        🔧 지원 프레임워크
                    </button>
                </div>

                <div class="form-group">
                    <button onclick="loadTestTemplates()" class="btn btn-secondary">
                        📝 테스트 템플릿
                    </button>
                </div>
            </div>

            <!-- 지능형 프로젝트 관리 -->
            <div class="feature-card">
                <h3><span class="icon">🎯</span>지능형 프로젝트 관리</h3>
                
                <div class="form-group">
                    <label>관리 기능 선택:</label>
                    <div class="select-group">
                        <select id="projectAction" class="form-control">
                            <option value="create">새 프로젝트 생성</option>
                            <option value="list">프로젝트 목록</option>
                            <option value="analytics">프로젝트 분석</option>
                            <option value="dashboard">대시보드</option>
                            <option value="templates">템플릿 목록</option>
                        </select>
                    </div>
                </div>

                <!-- 새 프로젝트 생성 -->
                <div id="createProjectForm" class="form-group">
                    <label>프로젝트명:</label>
                    <input type="text" id="projectName" class="form-control" placeholder="프로젝트명을 입력하세요">
                    
                    <label>프로젝트 설명:</label>
                    <textarea id="projectDescription" class="form-control" placeholder="프로젝트 설명을 입력하세요"></textarea>
                    
                    <label>프로젝트 유형:</label>
                    <select id="projectType" class="form-control">
                        <option value="web-app">웹 애플리케이션</option>
                        <option value="mobile-app">모바일 앱</option>
                        <option value="ai-project">AI/ML 프로젝트</option>
                        <option value="api">API 서비스</option>
                        <option value="library">라이브러리</option>
                        <option value="other">기타</option>
                    </select>
                    
                    <label>복잡도:</label>
                    <select id="projectComplexity" class="form-control">
                        <option value="LOW">낮음</option>
                        <option value="MEDIUM" selected>보통</option>
                        <option value="HIGH">높음</option>
                    </select>
                    
                    <label>예상 팀 크기:</label>
                    <input type="text" id="teamSize" class="form-control" placeholder="예: 3-5명" value="3-5명">
                    
                    <label>목표 기간 (주):</label>
                    <input type="number" id="targetDuration" class="form-control" placeholder="12" value="12">
                </div>

                <!-- 프로젝트 목록/분석 -->
                <div id="projectListForm" class="form-group" style="display: none;">
                    <label>프로젝트 ID (분석용):</label>
                    <input type="text" id="projectId" class="form-control" placeholder="분석할 프로젝트 ID를 입력하세요">
                </div>

                <button id="executeProjectAction" class="btn btn-primary">
                    🎯 실행
                </button>
            </div>
        </div>

        <!-- 시스템 모니터링 & 대시보드 -->
        <div class="feature-card">
            <h3><span class="icon">📊</span>시스템 모니터링 & 대시보드</h3>
            
            <div class="form-group">
                <label>모니터링 옵션:</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="realTimeMonitoring" checked>
                        <label for="realTimeMonitoring">실시간 모니터링</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="alertEnabled">
                        <label for="alertEnabled">알림 활성화</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="autoRefresh" checked>
                        <label for="autoRefresh">자동 새로고침</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <button onclick="window.open('/monitoring-dashboard.html', '_blank')" class="btn btn-primary">
                    📊 전체 모니터링 대시보드 열기
                </button>
            </div>

            <div class="form-group">
                <button onclick="loadQuickMonitoringData()" class="btn btn-secondary">
                    ⚡ 빠른 시스템 상태 확인
                </button>
            </div>

            <!-- 시스템 상태 미리보기 -->
            <div id="quickMonitoringPreview" class="monitoring-preview" style="display: none;">
                <h4>시스템 상태 요약</h4>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="cpuUsage">-</div>
                        <div class="stat-label">CPU 사용률</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="memoryUsage">-</div>
                        <div class="stat-label">메모리 사용률</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="diskUsage">-</div>
                        <div class="stat-label">디스크 사용률</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="systemUptime">-</div>
                        <div class="stat-label">시스템 가동시간</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 자동화된 배포 (CI/CD) -->
        <div class="feature-card">
            <h3><span class="icon">🚀</span>자동화된 배포 (CI/CD)</h3>
            
            <div class="form-group">
                <label>배포 작업 선택:</label>
                <select id="deploymentAction" class="form-control" onchange="updateDeploymentForm()">
                    <option value="">작업을 선택하세요</option>
                    <option value="create">배포 파이프라인 생성</option>
                    <option value="deploy">애플리케이션 배포</option>
                    <option value="status">배포 상태 확인</option>
                    <option value="rollback">롤백 실행</option>
                    <option value="logs">배포 로그 조회</option>
                    <option value="metrics">배포 메트릭 조회</option>
                </select>
            </div>

            <!-- 파이프라인 생성 폼 -->
            <div id="createPipelineForm" class="form-group" style="display: none;">
                <label>파이프라인 이름:</label>
                <input type="text" id="pipelineName" class="form-control" placeholder="my-app-pipeline">
                
                <label>Git 저장소 URL:</label>
                <input type="url" id="gitRepository" class="form-control" placeholder="https://github.com/user/repo.git">
                
                <label>브랜치:</label>
                <input type="text" id="gitBranch" class="form-control" placeholder="main" value="main">
                
                <label>빌드 환경:</label>
                <select id="buildEnvironment" class="form-control">
                    <option value="node">Node.js</option>
                    <option value="python">Python</option>
                    <option value="java">Java</option>
                    <option value="go">Go</option>
                    <option value="docker">Docker</option>
                </select>
                
                <label>배포 타겟:</label>
                <select id="deploymentTarget" class="form-control">
                    <option value="aws">AWS</option>
                    <option value="azure">Azure</option>
                    <option value="gcp">Google Cloud</option>
                    <option value="heroku">Heroku</option>
                    <option value="vercel">Vercel</option>
                    <option value="netlify">Netlify</option>
                </select>
            </div>

            <!-- 배포 실행 폼 -->
            <div id="deployForm" class="form-group" style="display: none;">
                <label>파이프라인 ID:</label>
                <input type="text" id="deployPipelineId" class="form-control" placeholder="배포할 파이프라인 ID">
                
                <label>환경:</label>
                <select id="deployEnvironment" class="form-control">
                    <option value="development">Development</option>
                    <option value="staging">Staging</option>
                    <option value="production">Production</option>
                </select>
                
                <label>배포 유형:</label>
                <select id="deploymentType" class="form-control">
                    <option value="blue-green">Blue-Green</option>
                    <option value="rolling">Rolling Update</option>
                    <option value="canary">Canary</option>
                </select>
            </div>

            <!-- 상태 확인 폼 -->
            <div id="statusForm" class="form-group" style="display: none;">
                <label>배포 ID:</label>
                <input type="text" id="deploymentId" class="form-control" placeholder="상태를 확인할 배포 ID">
            </div>

            <!-- 롤백 폼 -->
            <div id="rollbackForm" class="form-group" style="display: none;">
                <label>배포 ID:</label>
                <input type="text" id="rollbackDeploymentId" class="form-control" placeholder="롤백할 배포 ID">
                
                <label>롤백 버전:</label>
                <input type="text" id="rollbackVersion" class="form-control" placeholder="이전 버전 (선택사항)">
            </div>

            <!-- 로그 조회 폼 -->
            <div id="logsForm" class="form-group" style="display: none;">
                <label>배포 ID:</label>
                <input type="text" id="logsDeploymentId" class="form-control" placeholder="로그를 조회할 배포 ID">
                
                <label>로그 수:</label>
                <input type="number" id="logLimit" class="form-control" placeholder="100" value="100">
            </div>

            <!-- 메트릭 조회 폼 -->
            <div id="metricsForm" class="form-group" style="display: none;">
                <label>배포 ID:</label>
                <input type="text" id="metricsDeploymentId" class="form-control" placeholder="메트릭을 조회할 배포 ID">
                
                <label>시간 범위:</label>
                <select id="metricsTimeRange" class="form-control">
                    <option value="1h">1시간</option>
                    <option value="6h">6시간</option>
                    <option value="24h">24시간</option>
                    <option value="7d">7일</option>
                </select>
            </div>

            <button id="executeDeploymentAction" class="btn btn-success">
                🚀 배포 실행
            </button>
        </div>

        <!-- 로딩 인디케이터 -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>처리 중입니다...</p>
        </div>

        <!-- 결과 표시 영역 -->
        <div id="results" class="results">
            <div class="result-header">
                <h3 id="resultTitle">결과</h3>
                <span id="resultScore" class="score-badge"></span>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showTab('overview')">개요</button>
                <button class="tab" onclick="showTab('details')">상세</button>
                <button class="tab" onclick="showTab('code')">코드</button>
                <button class="tab" onclick="showTab('suggestions')">제안사항</button>
            </div>

            <div id="tab-overview" class="tab-content active">
                <div id="overviewContent"></div>
            </div>

            <div id="tab-details" class="tab-content">
                <div id="detailsContent"></div>
            </div>

            <div id="tab-code" class="tab-content">
                <div id="codeContent"></div>
            </div>

            <div id="tab-suggestions" class="tab-content">
                <div id="suggestionsContent"></div>
            </div>
        </div>
    </div>

    <!-- 알림 -->
    <div id="notification" class="notification"></div>

    <script>
        // 전역 변수
        let currentResult = null;

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
        });

        // 이벤트 리스너 설정
        function setupEventListeners() {
            // 리뷰 타입 변경
            document.getElementById('reviewType').addEventListener('change', function() {
                const type = this.value;
                document.getElementById('reviewTextInput').style.display = type === 'text' ? 'block' : 'none';
                document.getElementById('reviewFileInput').style.display = type === 'file' ? 'block' : 'none';
                document.getElementById('reviewProjectInput').style.display = type === 'project' ? 'block' : 'none';
            });

            // 테스트 생성 타입 변경
            document.getElementById('testGenType').addEventListener('change', function() {
                const type = this.value;
                document.getElementById('testFileInput').style.display = type === 'file' || type === 'analyze' ? 'block' : 'none';
                document.getElementById('testProjectInput').style.display = type === 'project' ? 'block' : 'none';
                document.getElementById('testCustomInput').style.display = type === 'custom' ? 'block' : 'none';
            });

            // 프로젝트 관리 액션 변경
            document.getElementById('projectAction').addEventListener('change', function() {
                const action = this.value;
                document.getElementById('createProjectForm').style.display = action === 'create' ? 'block' : 'none';
                document.getElementById('projectListForm').style.display = 
                    (action === 'analytics') ? 'block' : 'none';
            });

            // 프로젝트 관리 실행 버튼
            document.getElementById('executeProjectAction').addEventListener('click', executeProjectAction);

            // 파일 드래그 앤 드롭
            setupFileDragDrop();
        }

        // 파일 드래그 앤 드롭 설정
        function setupFileDragDrop() {
            const fileInputs = document.querySelectorAll('.file-upload');
            
            fileInputs.forEach(fileInput => {
                const label = fileInput.querySelector('.file-upload-label');
                const input = fileInput.querySelector('input[type=file]');

                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    label.addEventListener(eventName, preventDefaults, false);
                });

                ['dragenter', 'dragover'].forEach(eventName => {
                    label.addEventListener(eventName, highlight, false);
                });

                ['dragleave', 'drop'].forEach(eventName => {
                    label.addEventListener(eventName, unhighlight, false);
                });

                label.addEventListener('drop', handleDrop, false);

                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }

                function highlight(e) {
                    label.style.borderColor = '#667eea';
                    label.style.background = 'rgba(102, 126, 234, 0.1)';
                }

                function unhighlight(e) {
                    label.style.borderColor = '#cbd5e0';
                    label.style.background = 'rgba(255, 255, 255, 0.5)';
                }

                function handleDrop(e) {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    input.files = files;
                    
                    if (files.length > 0) {
                        label.textContent = `📁 ${files[0].name}`;
                    }
                }
            });

            // 파일 선택 시 라벨 업데이트
            document.querySelectorAll('input[type=file]').forEach(input => {
                input.addEventListener('change', function() {
                    const label = this.parentNode.querySelector('.file-upload-label');
                    if (this.files.length > 0) {
                        label.textContent = `📁 ${this.files[0].name}`;
                    }
                });
            });
        }

        // 코드 리뷰 시작
        async function startCodeReview() {
            const reviewType = document.getElementById('reviewType').value;
            const saveResult = document.getElementById('saveReviewResult').checked;

            try {
                showLoading(true);
                let response;

                if (reviewType === 'text') {
                    const code = document.getElementById('reviewCode').value.trim();
                    if (!code) {
                        showNotification('코드를 입력해주세요.', 'error');
                        return;
                    }

                    response = await fetch('/api/v1/code-review/text', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            code: code,
                            options: { saveResult }
                        })
                    });

                } else if (reviewType === 'file') {
                    const fileInput = document.getElementById('reviewFile');
                    if (!fileInput.files.length) {
                        showNotification('파일을 선택해주세요.', 'error');
                        return;
                    }

                    const formData = new FormData();
                    formData.append('codeFile', fileInput.files[0]);
                    formData.append('options', JSON.stringify({ saveResult }));

                    response = await fetch('/api/v1/code-review/file', {
                        method: 'POST',
                        body: formData
                    });

                } else if (reviewType === 'project') {
                    const projectPath = document.getElementById('reviewProjectPath').value.trim();
                    if (!projectPath) {
                        showNotification('프로젝트 경로를 입력해주세요.', 'error');
                        return;
                    }

                    response = await fetch('/api/v1/code-review/project', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            projectPath: projectPath,
                            options: { saveResult }
                        })
                    });
                }

                const result = await response.json();
                
                if (result.success) {
                    showNotification(result.message, 'success');
                    if (reviewType !== 'project') {
                        displayCodeReviewResult(result.data);
                    }
                } else {
                    showNotification(`오류: ${result.error}`, 'error');
                }

            } catch (error) {
                showNotification(`네트워크 오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // 테스트 생성 시작
        async function startTestGeneration() {
            const genType = document.getElementById('testGenType').value;
            const framework = document.getElementById('testFramework').value;
            const language = document.getElementById('testLanguage').value;
            const unitTests = document.getElementById('unitTests').checked;
            const integrationTests = document.getElementById('integrationTests').checked;

            const testTypes = [];
            if (unitTests) testTypes.push('unit');
            if (integrationTests) testTypes.push('integration');

            try {
                showLoading(true);
                let response;

                if (genType === 'file' || genType === 'analyze') {
                    const fileInput = document.getElementById('testSourceFile');
                    if (!fileInput.files.length) {
                        showNotification('소스 파일을 선택해주세요.', 'error');
                        return;
                    }

                    const formData = new FormData();
                    formData.append('sourceFile', fileInput.files[0]);
                    formData.append('options', JSON.stringify({
                        framework, language, testTypes, coverage: 'comprehensive'
                    }));

                    const endpoint = genType === 'analyze' ? '/api/v1/test-generator/analyze' : '/api/v1/test-generator/file';
                    response = await fetch(endpoint, {
                        method: 'POST',
                        body: formData
                    });

                } else if (genType === 'project') {
                    const projectPath = document.getElementById('testProjectPath').value.trim();
                    if (!projectPath) {
                        showNotification('프로젝트 경로를 입력해주세요.', 'error');
                        return;
                    }

                    response = await fetch('/api/v1/test-generator/project', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            projectPath: projectPath,
                            options: { framework, language, testTypes, coverage: 'basic' }
                        })
                    });

                } else if (genType === 'custom') {
                    const code = document.getElementById('testCustomCode').value.trim();
                    const requirements = document.getElementById('testRequirements').value.trim();
                    
                    if (!code || !requirements) {
                        showNotification('코드와 요구사항을 모두 입력해주세요.', 'error');
                        return;
                    }

                    const reqArray = requirements.split('\n').filter(r => r.trim());

                    response = await fetch('/api/v1/test-generator/custom', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            codeContent: code,
                            requirements: reqArray,
                            framework, language, testTypes
                        })
                    });
                }

                const result = await response.json();
                
                if (result.success) {
                    showNotification(result.message, 'success');
                    if (genType !== 'project') {
                        displayTestGenerationResult(result.data, genType);
                    }
                } else {
                    showNotification(`오류: ${result.error}`, 'error');
                }

            } catch (error) {
                showNotification(`네트워크 오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // 프로젝트 분석 시작
        async function startProjectAnalysis() {
            const analysisType = document.getElementById('analysisType').value;
            const projectPath = document.getElementById('analysisProjectPath').value.trim();
            const includeTests = document.getElementById('includeTests').checked;
            const deepAnalysis = document.getElementById('deepAnalysis').checked;

            if (!projectPath) {
                showNotification('프로젝트 경로를 입력해주세요.', 'error');
                return;
            }

            try {
                showLoading(true);
                
                const response = await fetch('/api/v1/analysis/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        projectPath: projectPath,
                        analysisType: analysisType,
                        options: {
                            includeTests: includeTests,
                            deepAnalysis: deepAnalysis
                        }
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    showNotification('프로젝트 분석이 완료되었습니다.', 'success');
                    displayAnalysisResult(result.data);
                } else {
                    showNotification(`오류: ${result.error}`, 'error');
                }

            } catch (error) {
                showNotification(`네트워크 오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // 코드 리뷰 히스토리 로드
        async function loadCodeReviewHistory() {
            try {
                showLoading(true);
                
                const response = await fetch('/api/v1/code-review/history');
                const result = await response.json();
                
                if (result.success) {
                    displayHistoryResult(result.data);
                } else {
                    showNotification(`오류: ${result.error}`, 'error');
                }

            } catch (error) {
                showNotification(`네트워크 오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // 리뷰 통계 로드
        async function loadReviewStats() {
            try {
                showLoading(true);
                
                const response = await fetch('/api/v1/code-review/stats');
                const result = await response.json();
                
                if (result.success) {
                    displayStatsResult(result.data);
                } else {
                    showNotification(`오류: ${result.error}`, 'error');
                }

            } catch (error) {
                showNotification(`네트워크 오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // 지원 프레임워크 로드
        async function loadTestFrameworks() {
            try {
                showLoading(true);
                
                const response = await fetch('/api/v1/test-generator/frameworks');
                const result = await response.json();
                
                if (result.success) {
                    displayFrameworksResult(result.data);
                } else {
                    showNotification(`오류: ${result.error}`, 'error');
                }

            } catch (error) {
                showNotification(`네트워크 오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // 테스트 템플릿 로드
        async function loadTestTemplates() {
            try {
                showLoading(true);
                
                const response = await fetch('/api/v1/test-generator/templates');
                const result = await response.json();
                
                if (result.success) {
                    displayTemplatesResult(result.data);
                } else {
                    showNotification(`오류: ${result.error}`, 'error');
                }

            } catch (error) {
                showNotification(`네트워크 오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // 결과 표시 함수들
        function displayCodeReviewResult(data) {
            currentResult = data;
            
            document.getElementById('resultTitle').textContent = '코드 리뷰 결과';
            setScoreBadge(data.overall_score);
            
            // 개요
            const overviewHtml = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">${data.overall_score}</div>
                        <div class="stat-label">전체 점수</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${data.issues.length}</div>
                        <div class="stat-label">발견된 이슈</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${data.suggestions.length}</div>
                        <div class="stat-label">개선 제안</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${data.auto_fixes.length}</div>
                        <div class="stat-label">자동 수정</div>
                    </div>
                </div>
            `;
            
            document.getElementById('overviewContent').innerHTML = overviewHtml;
            
            // 상세 정보
            const detailsHtml = generateIssuesHtml(data.issues) + generateCategoriesHtml(data.categories);
            document.getElementById('detailsContent').innerHTML = detailsHtml;
            
            // 제안사항
            const suggestionsHtml = generateSuggestionsHtml(data.suggestions) + generateAutoFixesHtml(data.auto_fixes);
            document.getElementById('suggestionsContent').innerHTML = suggestionsHtml;
            
            showResults();
        }

        function displayTestGenerationResult(data, type) {
            currentResult = data;
            
            document.getElementById('resultTitle').textContent = 
                type === 'analyze' ? '코드 분석 결과' : '테스트 생성 결과';
            
            if (data.coverage_estimate) {
                setScoreBadge(data.coverage_estimate.overall_coverage);
            }
            
            // 개요
            let overviewHtml = '';
            
            if (type === 'analyze') {
                overviewHtml = `
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">${data.functions.length}</div>
                            <div class="stat-label">함수 수</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.classes.length}</div>
                            <div class="stat-label">클래스 수</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.complexity}</div>
                            <div class="stat-label">복잡도</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.dependencies.length}</div>
                            <div class="stat-label">의존성 수</div>
                        </div>
                    </div>
                `;
            } else {
                const unitTests = data.generated_tests ? data.generated_tests.unit_tests.length : 0;
                const integrationTests = data.generated_tests ? data.generated_tests.integration_tests.length : 0;
                
                overviewHtml = `
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">${unitTests}</div>
                            <div class="stat-label">단위 테스트</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${integrationTests}</div>
                            <div class="stat-label">통합 테스트</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.coverage_estimate ? data.coverage_estimate.overall_coverage : 0}%</div>
                            <div class="stat-label">예상 커버리지</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${data.framework}</div>
                            <div class="stat-label">프레임워크</div>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('overviewContent').innerHTML = overviewHtml;
            
            // 코드 탭에 생성된 테스트 표시
            if (data.test_suite) {
                const codeHtml = `
                    <h4>생성된 테스트 코드:</h4>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyToClipboard(this.nextElementSibling.textContent)">복사</button>
                        <pre>${escapeHtml(data.test_suite)}</pre>
                    </div>
                `;
                document.getElementById('codeContent').innerHTML = codeHtml;
            }
            
            // 제안사항
            if (data.recommendations) {
                const suggestionsHtml = generateRecommendationsHtml(data.recommendations);
                document.getElementById('suggestionsContent').innerHTML = suggestionsHtml;
            }
            
            showResults();
        }

        // 지능형 프로젝트 관리 함수들
        async function executeProjectAction() {
            const action = document.getElementById('projectAction').value;
            
            showLoading(true);
            
            try {
                switch (action) {
                    case 'create':
                        await createIntelligentProject();
                        break;
                    case 'list':
                        await getProjectList();
                        break;
                    case 'analytics':
                        await getProjectAnalytics();
                        break;
                    case 'dashboard':
                        await getProjectDashboard();
                        break;
                    case 'templates':
                        await getProjectTemplates();
                        break;
                    default:
                        throw new Error('알 수 없는 액션입니다.');
                }
            } catch (error) {
                console.error('프로젝트 관리 오류:', error);
                showNotification(`오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        async function createIntelligentProject() {
            const name = document.getElementById('projectName').value.trim();
            const description = document.getElementById('projectDescription').value.trim();
            const type = document.getElementById('projectType').value;
            const complexity = document.getElementById('projectComplexity').value;
            const teamSize = document.getElementById('teamSize').value.trim();
            const targetDuration = parseInt(document.getElementById('targetDuration').value);

            if (!name || !description) {
                throw new Error('프로젝트명과 설명을 입력해주세요.');
            }

            const response = await fetch('/api/v1/intelligent-project/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    name,
                    description,
                    type,
                    complexity,
                    teamSize,
                    targetDuration,
                    createdBy: 'web-user'
                })
            });

            const result = await response.json();
            
            if (!response.ok) {
                throw new Error(result.error || '프로젝트 생성에 실패했습니다.');
            }

            displayProjectResult('프로젝트 생성 완료', result.project);
            showNotification('지능형 프로젝트가 성공적으로 생성되었습니다!', 'success');
        }

        async function getProjectList() {
            const response = await fetch('/api/v1/intelligent-project/list');
            const result = await response.json();
            
            if (!response.ok) {
                throw new Error(result.error || '프로젝트 목록 조회에 실패했습니다.');
            }

            displayProjectListResult(result);
            showNotification(`${result.count}개의 프로젝트를 조회했습니다.`, 'success');
        }

        async function getProjectAnalytics() {
            const projectId = document.getElementById('projectId').value.trim();
            
            if (!projectId) {
                throw new Error('프로젝트 ID를 입력해주세요.');
            }

            const response = await fetch(`/api/v1/intelligent-project/${projectId}/analytics`);
            const result = await response.json();
            
            if (!response.ok) {
                throw new Error(result.error || '프로젝트 분석에 실패했습니다.');
            }

            displayAnalyticsResult(result.analytics);
            showNotification('프로젝트 분석이 완료되었습니다.', 'success');
        }

        async function getProjectDashboard() {
            const response = await fetch('/api/v1/intelligent-project/dashboard');
            const result = await response.json();
            
            if (!response.ok) {
                throw new Error(result.error || '대시보드 조회에 실패했습니다.');
            }

            displayDashboardResult(result.dashboard);
            showNotification('대시보드가 업데이트되었습니다.', 'success');
        }

        async function getProjectTemplates() {
            const response = await fetch('/api/v1/intelligent-project/templates');
            const result = await response.json();
            
            if (!response.ok) {
                throw new Error(result.error || '템플릿 조회에 실패했습니다.');
            }

            displayTemplatesResult(result.templates);
            showNotification(`${result.count}개의 템플릿을 조회했습니다.`, 'success');
        }

        function displayProjectResult(title, project) {
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultScore').textContent = project.complexity;
            document.getElementById('resultScore').className = `score-badge score-${project.complexity.toLowerCase() === 'high' ? 'good' : 'excellent'}`;
            
            const content = `
                <div class="result-content">
                    <h4>📋 프로젝트 정보</h4>
                    <p><strong>ID:</strong> ${project.id}</p>
                    <p><strong>이름:</strong> ${project.name}</p>
                    <p><strong>상태:</strong> ${project.status}</p>
                    <p><strong>예상 기간:</strong> ${project.estimated_duration}주</p>
                    <p><strong>복잡도:</strong> ${project.complexity}</p>
                    <p><strong>권장 팀 크기:</strong> ${project.team_size}</p>

                    <h4>🏗️ 프로젝트 단계</h4>
                    <ul>
                        ${project.phases?.map(phase => `
                            <li><strong>${phase.name}</strong> (${phase.duration_weeks}주)
                                <br><em>${phase.description}</em>
                            </li>
                        `).join('') || '<li>단계 정보 없음</li>'}
                    </ul>

                    <h4>🎯 마일스톤</h4>
                    <ul>
                        ${project.milestones?.map(milestone => `
                            <li><strong>${milestone.name}</strong> - ${milestone.target_date}
                                <br><em>${milestone.description}</em>
                            </li>
                        `).join('') || '<li>마일스톤 정보 없음</li>'}
                    </ul>

                    <h4>💻 기술 스택</h4>
                    <div class="tech-stack">
                        <p><strong>프론트엔드:</strong> ${project.tech_stack?.frontend?.join(', ') || 'N/A'}</p>
                        <p><strong>백엔드:</strong> ${project.tech_stack?.backend?.join(', ') || 'N/A'}</p>
                        <p><strong>데이터베이스:</strong> ${project.tech_stack?.database?.join(', ') || 'N/A'}</p>
                        <p><strong>도구:</strong> ${project.tech_stack?.tools?.join(', ') || 'N/A'}</p>
                    </div>

                    ${project.ai_analysis ? `
                        <h4>🤖 AI 분석</h4>
                        <p><strong>프로젝트 유형:</strong> ${project.ai_analysis.project_type}</p>
                        <p><strong>핵심 기능:</strong> ${project.ai_analysis.key_features?.join(', ')}</p>
                        <p><strong>기술적 도전:</strong> ${project.ai_analysis.technical_challenges?.join(', ')}</p>
                        <p><strong>비즈니스 가치:</strong> ${project.ai_analysis.business_value}</p>
                    ` : ''}
                </div>
            `;
            
            document.getElementById('resultContent').innerHTML = content;
            showResults();
        }

        function displayProjectListResult(result) {
            document.getElementById('resultTitle').textContent = `프로젝트 목록 (${result.count}개)`;
            document.getElementById('resultScore').textContent = `${result.count}개`;
            document.getElementById('resultScore').className = 'score-badge score-excellent';
            
            const content = `
                <div class="result-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">${result.count}</div>
                            <div class="stat-label">전체 프로젝트</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${result.projects.filter(p => p.status === 'active').length}</div>
                            <div class="stat-label">진행 중</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${result.projects.filter(p => p.status === 'completed').length}</div>
                            <div class="stat-label">완료됨</div>
                        </div>
                    </div>

                    <h4>📋 프로젝트 목록</h4>
                    <div class="project-list">
                        ${result.projects.map(project => `
                            <div class="project-item" style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; margin: 10px 0;">
                                <h5>${project.name}</h5>
                                <p>${project.description}</p>
                                <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                                    <span class="status-badge status-${project.status}">${project.status}</span>
                                    <span class="priority-badge priority-${project.priority}">${project.priority}</span>
                                    <span class="progress-badge">${project.progress}%</span>
                                </div>
                                <p style="font-size: 12px; color: #666; margin-top: 5px;">
                                    ID: ${project.id} | 생성: ${new Date(project.created_at).toLocaleDateString()}
                                </p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('resultContent').innerHTML = content;
            showResults();
        }

        function displayDashboardResult(dashboard) {
            document.getElementById('resultTitle').textContent = '프로젝트 대시보드';
            document.getElementById('resultScore').textContent = `${dashboard.average_completion}%`;
            document.getElementById('resultScore').className = 'score-badge score-excellent';
            
            const content = `
                <div class="result-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">${dashboard.total_projects}</div>
                            <div class="stat-label">전체 프로젝트</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${dashboard.active_projects}</div>
                            <div class="stat-label">진행 중</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${dashboard.completed_projects}</div>
                            <div class="stat-label">완료됨</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${dashboard.at_risk_projects}</div>
                            <div class="stat-label">위험</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${dashboard.average_completion}%</div>
                            <div class="stat-label">평균 진행률</div>
                        </div>
                    </div>

                    <h4>🎯 다가오는 마일스톤</h4>
                    <ul>
                        ${dashboard.upcoming_milestones.slice(0, 5).map(milestone => `
                            <li><strong>${milestone.project_name}</strong>: ${milestone.milestone} (${milestone.target_date})</li>
                        `).join('') || '<li>예정된 마일스톤이 없습니다.</li>'}
                    </ul>

                    <h4>📈 최근 활동</h4>
                    <ul>
                        ${dashboard.recent_activity.map(activity => `
                            <li><strong>${activity.project_name}</strong> (${activity.progress}%) - ${new Date(activity.last_update).toLocaleDateString()}</li>
                        `).join('') || '<li>최근 활동이 없습니다.</li>'}
                    </ul>
                </div>
            `;
            
            document.getElementById('resultContent').innerHTML = content;
            showResults();
        }

        function displayTemplatesResult(templates) {
            document.getElementById('resultTitle').textContent = `프로젝트 템플릿 (${templates.length}개)`;
            document.getElementById('resultScore').textContent = `${templates.length}개`;
            document.getElementById('resultScore').className = 'score-badge score-good';
            
            const content = `
                <div class="result-content">
                    <h4>📝 사용 가능한 템플릿</h4>
                    <div class="template-grid">
                        ${templates.map(template => `
                            <div class="template-item" style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin: 10px 0;">
                                <h5>${template.name}</h5>
                                <p>${template.description}</p>
                                <p><strong>카테고리:</strong> ${template.category}</p>
                                <p><strong>예상 기간:</strong> ${template.estimated_duration}주</p>
                                <div class="tech-stack">
                                    <p><strong>기술 스택:</strong> ${template.tech_stack?.join(', ') || 'N/A'}</p>
                                </div>
                                <button class="btn btn-secondary" onclick="useTemplate('${template.id}')">
                                    🚀 이 템플릿 사용
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('resultContent').innerHTML = content;
            showResults();
        }

        async function useTemplate(templateId) {
            const projectName = prompt('새 프로젝트명을 입력하세요:');
            if (!projectName) return;

            try {
                showLoading(true);
                
                const response = await fetch('/api/v1/intelligent-project/from-template', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        templateId,
                        projectName,
                        customizations: {}
                    })
                });

                const result = await response.json();
                
                if (!response.ok) {
                    throw new Error(result.error || '템플릿으로부터 프로젝트 생성에 실패했습니다.');
                }

                displayProjectResult('템플릿으로부터 프로젝트 생성 완료', result.project);
                showNotification('템플릿으로부터 프로젝트가 성공적으로 생성되었습니다!', 'success');
                
            } catch (error) {
                console.error('템플릿 사용 오류:', error);
                showNotification(`오류: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // AI 설정 관리 함수들
        async function refreshAIStatus() {
            try {
                showLoading();
                
                const response = await fetch('/api/v1/ai/status');
                const result = await response.json();
                
                if (result.success) {
                    updateAIStatusDisplay(result.data);
                    showNotification('AI 상태가 새로고침되었습니다.', 'success');
                } else {
                    throw new Error(result.message || 'AI 상태 조회에 실패했습니다.');
                }
            } catch (error) {
                console.error('AI 상태 새로고침 오류:', error);
                showNotification('AI 상태 새로고침에 실패했습니다: ' + error.message, 'error');
            } finally {
                hideLoading();
            }
        }

        async function changeAIProvider() {
            const selectedProvider = document.getElementById('aiProvider').value;
            
            try {
                showLoading();
                
                const response = await fetch('/api/v1/ai/set-provider', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ provider: selectedProvider })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    updateAIStatusDisplay(result.data.status);
                    showNotification(result.data.message, 'success');
                } else {
                    throw new Error(result.message || 'AI 제공자 변경에 실패했습니다.');
                }
            } catch (error) {
                console.error('AI 제공자 변경 오류:', error);
                showNotification('AI 제공자 변경에 실패했습니다: ' + error.message, 'error');
            } finally {
                hideLoading();
            }
        }

        async function testAIProvider() {
            const selectedProvider = document.getElementById('aiProvider').value;
            
            try {
                showLoading();
                
                const response = await fetch('/api/v1/ai/test-provider', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ provider: selectedProvider })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    const message = result.data.testPassed ? 
                        `✅ ${result.data.provider} 연결 테스트 성공!` : 
                        `❌ ${result.data.provider} 연결 테스트 실패`;
                    
                    showNotification(message, result.data.testPassed ? 'success' : 'error');
                    
                    // 테스트 결과 표시
                    document.getElementById('aiStatusResult').style.display = 'block';
                    document.getElementById('aiStatusContent').innerHTML = `
                        <div class="test-result ${result.data.testPassed ? 'success' : 'failed'}">
                            <h5>연결 테스트 결과</h5>
                            <p><strong>제공자:</strong> ${result.data.provider}</p>
                            <p><strong>상태:</strong> ${result.data.testPassed ? '정상' : '실패'}</p>
                            <p><strong>테스트 시간:</strong> ${new Date(result.data.timestamp).toLocaleString()}</p>
                        </div>
                    `;
                } else {
                    throw new Error(result.message || 'AI 제공자 테스트에 실패했습니다.');
                }
            } catch (error) {
                console.error('AI 제공자 테스트 오류:', error);
                showNotification('AI 제공자 테스트에 실패했습니다: ' + error.message, 'error');
            } finally {
                hideLoading();
            }
        }

        function updateAIStatusDisplay(status) {
            // 현재 제공자 표시
            const currentProviderEl = document.getElementById('currentProvider');
            currentProviderEl.textContent = status.provider.toUpperCase();
            currentProviderEl.className = `status-indicator ${status.isEnabled ? 'enabled' : 'disabled'}`;
            
            // 제공자 선택 업데이트
            document.getElementById('aiProvider').value = status.provider;
            
            // 사용 가능한 제공자 상태 업데이트
            const openaiStatus = document.getElementById('openaiStatus');
            const geminiStatus = document.getElementById('geminiStatus');
            
            openaiStatus.className = `provider-badge ${
                status.availableProviders.openai ? 'available' : 'unavailable'
            } ${status.provider === 'openai' ? 'active' : ''}`;
            
            geminiStatus.className = `provider-badge ${
                status.availableProviders.gemini ? 'available' : 'unavailable'
            } ${status.provider === 'gemini' ? 'active' : ''}`;
            
            // 상세 정보 표시
            document.getElementById('aiStatusResult').style.display = 'block';
            document.getElementById('aiStatusContent').innerHTML = `
                <div class="ai-status-details">
                    <h5>AI 서비스 상태</h5>
                    <p><strong>활성화:</strong> ${status.isEnabled ? '✅ 예' : '❌ 아니오'}</p>
                    <p><strong>현재 제공자:</strong> ${status.provider.toUpperCase()}</p>
                    <p><strong>모델:</strong> ${status.models[status.provider] || '알 수 없음'}</p>
                    <p><strong>온도:</strong> ${status.temperature}</p>
                    <p><strong>최대 토큰:</strong> ${status.maxTokens}</p>
                    
                    <h6>제공자 상태</h6>
                    <ul>
                        <li>OpenAI: ${status.availableProviders.openai ? '✅ 사용 가능' : '❌ 사용 불가'}</li>
                        <li>Google Gemini: ${status.availableProviders.gemini ? '✅ 사용 가능' : '❌ 사용 불가'}</li>
                    </ul>
                </div>
            `;
        }

        // 페이지 로드 시 AI 상태 확인
        document.addEventListener('DOMContentLoaded', function() {
            // 기존 이벤트 리스너들...
            setupEventListeners();
            
            // AI 상태 자동 로드
            refreshAIStatus();
            
            // 배포 관리 이벤트 리스너
            const executeDeploymentBtn = document.getElementById('executeDeploymentAction');
            if (executeDeploymentBtn) {
                executeDeploymentBtn.addEventListener('click', executeDeploymentAction);
            }
        });

        // 빠른 모니터링 데이터 로드
        async function loadQuickMonitoringData() {
            showLoading();
            
            try {
                const response = await fetch('/api/monitoring/system');
                const data = await response.json();
                
                if (response.ok) {
                    displayQuickMonitoringData(data);
                    showNotification('시스템 상태를 성공적으로 로드했습니다.', 'success');
                } else {
                    throw new Error(data.error || '모니터링 데이터 로드 실패');
                }
            } catch (error) {
                console.error('모니터링 데이터 로드 오류:', error);
                showNotification(error.message || '모니터링 데이터 로드 중 오류가 발생했습니다.', 'error');
            } finally {
                hideLoading();
            }
        }

        function displayQuickMonitoringData(data) {
            // 시스템 메트릭 표시
            if (data.system) {
                document.getElementById('cpuUsage').textContent = `${Math.round(data.system.cpu?.percent || 0)}%`;
                document.getElementById('memoryUsage').textContent = `${Math.round(data.system.memory?.percent || 0)}%`;
                document.getElementById('diskUsage').textContent = `${Math.round(data.system.disk?.percent || 0)}%`;
                
                // 업타임 포맷팅
                const uptime = data.system.uptime || 0;
                const days = Math.floor(uptime / (24 * 3600));
                const hours = Math.floor((uptime % (24 * 3600)) / 3600);
                const uptimeStr = days > 0 ? `${days}일 ${hours}시간` : `${hours}시간`;
                document.getElementById('systemUptime').textContent = uptimeStr;
            }
            
            // 미리보기 표시
            document.getElementById('quickMonitoringPreview').style.display = 'block';
        }
    </script>
</body>
</html>
